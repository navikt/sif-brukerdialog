{"version":3,"file":"stegaEncodeSourceMap-aB5JVLto.js","sources":["../../../../node_modules/@sanity/client/dist/_chunks-es/stegaEncodeSourceMap.js"],"sourcesContent":["import { C } from \"./stegaClean.js\";\nconst reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/;\nfunction isKeySegment(segment) {\n  return typeof segment == \"string\" ? reKeySegment.test(segment.trim()) : typeof segment == \"object\" && \"_key\" in segment;\n}\nfunction toString(path) {\n  if (!Array.isArray(path))\n    throw new Error(\"Path is not an array\");\n  return path.reduce((target, segment, i) => {\n    const segmentType = typeof segment;\n    if (segmentType === \"number\")\n      return `${target}[${segment}]`;\n    if (segmentType === \"string\")\n      return `${target}${i === 0 ? \"\" : \".\"}${segment}`;\n    if (isKeySegment(segment) && segment._key)\n      return `${target}[_key==\"${segment._key}\"]`;\n    if (Array.isArray(segment)) {\n      const [from, to] = segment;\n      return `${target}[${from}:${to}]`;\n    }\n    throw new Error(`Unsupported path segment \\`${JSON.stringify(segment)}\\``);\n  }, \"\");\n}\nconst ESCAPE = {\n  \"\\f\": \"\\\\f\",\n  \"\\n\": \"\\\\n\",\n  \"\\r\": \"\\\\r\",\n  \"\t\": \"\\\\t\",\n  \"'\": \"\\\\'\",\n  \"\\\\\": \"\\\\\\\\\"\n}, UNESCAPE = {\n  \"\\\\f\": \"\\f\",\n  \"\\\\n\": `\n`,\n  \"\\\\r\": \"\\r\",\n  \"\\\\t\": \"\t\",\n  \"\\\\'\": \"'\",\n  \"\\\\\\\\\": \"\\\\\"\n};\nfunction jsonPath(path) {\n  return `$${path.map((segment) => typeof segment == \"string\" ? `['${segment.replace(/[\\f\\n\\r\\t'\\\\]/g, (match) => ESCAPE[match])}']` : typeof segment == \"number\" ? `[${segment}]` : segment._key !== \"\" ? `[?(@._key=='${segment._key.replace(/['\\\\]/g, (match) => ESCAPE[match])}')]` : `[${segment._index}]`).join(\"\")}`;\n}\nfunction parseJsonPath(path) {\n  const parsed = [], parseRe = /\\['(.*?)'\\]|\\[(\\d+)\\]|\\[\\?\\(@\\._key=='(.*?)'\\)\\]/g;\n  let match;\n  for (; (match = parseRe.exec(path)) !== null; ) {\n    if (match[1] !== void 0) {\n      const key = match[1].replace(/\\\\(\\\\|f|n|r|t|')/g, (m) => UNESCAPE[m]);\n      parsed.push(key);\n      continue;\n    }\n    if (match[2] !== void 0) {\n      parsed.push(parseInt(match[2], 10));\n      continue;\n    }\n    if (match[3] !== void 0) {\n      const _key = match[3].replace(/\\\\(\\\\')/g, (m) => UNESCAPE[m]);\n      parsed.push({\n        _key,\n        _index: -1\n      });\n      continue;\n    }\n  }\n  return parsed;\n}\nfunction jsonPathToStudioPath(path) {\n  return path.map((segment) => {\n    if (typeof segment == \"string\" || typeof segment == \"number\")\n      return segment;\n    if (segment._key !== \"\")\n      return { _key: segment._key };\n    if (segment._index !== -1)\n      return segment._index;\n    throw new Error(`invalid segment:${JSON.stringify(segment)}`);\n  });\n}\nfunction jsonPathToMappingPath(path) {\n  return path.map((segment) => {\n    if (typeof segment == \"string\" || typeof segment == \"number\")\n      return segment;\n    if (segment._index !== -1)\n      return segment._index;\n    throw new Error(`invalid segment:${JSON.stringify(segment)}`);\n  });\n}\nfunction resolveMapping(resultPath, csm) {\n  if (!csm?.mappings)\n    return;\n  const resultMappingPath = jsonPath(jsonPathToMappingPath(resultPath));\n  if (csm.mappings[resultMappingPath] !== void 0)\n    return {\n      mapping: csm.mappings[resultMappingPath],\n      matchedPath: resultMappingPath,\n      pathSuffix: \"\"\n    };\n  const mappings = Object.entries(csm.mappings).filter(([key]) => resultMappingPath.startsWith(key)).sort(([key1], [key2]) => key2.length - key1.length);\n  if (mappings.length == 0)\n    return;\n  const [matchedPath, mapping] = mappings[0], pathSuffix = resultMappingPath.substring(matchedPath.length);\n  return { mapping, matchedPath, pathSuffix };\n}\nfunction isArray(value) {\n  return value !== null && Array.isArray(value);\n}\nfunction isRecord(value) {\n  return typeof value == \"object\" && value !== null;\n}\nfunction walkMap(value, mappingFn, path = []) {\n  if (isArray(value))\n    return value.map((v, idx) => {\n      if (isRecord(v)) {\n        const _key = v._key;\n        if (typeof _key == \"string\")\n          return walkMap(v, mappingFn, path.concat({ _key, _index: idx }));\n      }\n      return walkMap(v, mappingFn, path.concat(idx));\n    });\n  if (isRecord(value)) {\n    if (value._type === \"block\" || value._type === \"span\") {\n      const result = { ...value };\n      return value._type === \"block\" ? result.children = walkMap(value.children, mappingFn, path.concat(\"children\")) : value._type === \"span\" && (result.text = walkMap(value.text, mappingFn, path.concat(\"text\"))), result;\n    }\n    return Object.fromEntries(\n      Object.entries(value).map(([k, v]) => [k, walkMap(v, mappingFn, path.concat(k))])\n    );\n  }\n  return mappingFn(value, path);\n}\nfunction encodeIntoResult(result, csm, encoder) {\n  return walkMap(result, (value, path) => {\n    if (typeof value != \"string\")\n      return value;\n    const resolveMappingResult = resolveMapping(path, csm);\n    if (!resolveMappingResult)\n      return value;\n    const { mapping, matchedPath } = resolveMappingResult;\n    if (mapping.type !== \"value\" || mapping.source.type !== \"documentValue\")\n      return value;\n    const sourceDocument = csm.documents[mapping.source.document], sourcePath = csm.paths[mapping.source.path], matchPathSegments = parseJsonPath(matchedPath), fullSourceSegments = parseJsonPath(sourcePath).concat(path.slice(matchPathSegments.length));\n    return encoder({\n      sourcePath: fullSourceSegments,\n      sourceDocument,\n      resultPath: path,\n      value\n    });\n  });\n}\nconst DRAFTS_PREFIX = \"drafts.\";\nfunction getPublishedId(id) {\n  return id.startsWith(DRAFTS_PREFIX) ? id.slice(DRAFTS_PREFIX.length) : id;\n}\nfunction createEditUrl(options) {\n  const {\n    baseUrl,\n    workspace: _workspace = \"default\",\n    tool: _tool = \"default\",\n    id: _id,\n    type,\n    path,\n    projectId,\n    dataset\n  } = options;\n  if (!baseUrl)\n    throw new Error(\"baseUrl is required\");\n  if (!path)\n    throw new Error(\"path is required\");\n  if (!_id)\n    throw new Error(\"id is required\");\n  if (baseUrl !== \"/\" && baseUrl.endsWith(\"/\"))\n    throw new Error(\"baseUrl must not end with a slash\");\n  const workspace = _workspace === \"default\" ? void 0 : _workspace, tool = _tool === \"default\" ? void 0 : _tool, id = getPublishedId(_id), stringifiedPath = Array.isArray(path) ? toString(jsonPathToStudioPath(path)) : path, searchParams = new URLSearchParams({\n    baseUrl,\n    id,\n    type,\n    path: stringifiedPath\n  });\n  workspace && searchParams.set(\"workspace\", workspace), tool && searchParams.set(\"tool\", tool), projectId && searchParams.set(\"projectId\", projectId), dataset && searchParams.set(\"dataset\", dataset), _id.startsWith(DRAFTS_PREFIX) && searchParams.set(\"isDraft\", \"\");\n  const segments = [baseUrl === \"/\" ? \"\" : baseUrl];\n  workspace && segments.push(workspace);\n  const routerParams = [\n    \"mode=presentation\",\n    `id=${id}`,\n    `type=${type}`,\n    `path=${encodeURIComponent(stringifiedPath)}`\n  ];\n  return tool && routerParams.push(`tool=${tool}`), segments.push(\"intent\", \"edit\", `${routerParams.join(\";\")}?${searchParams}`), segments.join(\"/\");\n}\nfunction resolveStudioBaseRoute(studioUrl) {\n  let baseUrl = typeof studioUrl == \"string\" ? studioUrl : studioUrl.baseUrl;\n  return baseUrl !== \"/\" && (baseUrl = baseUrl.replace(/\\/$/, \"\")), typeof studioUrl == \"string\" ? { baseUrl } : { ...studioUrl, baseUrl };\n}\nconst filterDefault = ({ sourcePath, resultPath, value }) => {\n  if (isValidDate(value) || isValidURL(value))\n    return !1;\n  const endPath = sourcePath.at(-1);\n  return !(sourcePath.at(-2) === \"slug\" && endPath === \"current\" || typeof endPath == \"string\" && (endPath.startsWith(\"_\") || endPath.endsWith(\"Id\")) || sourcePath.some(\n    (path) => path === \"meta\" || path === \"metadata\" || path === \"openGraph\" || path === \"seo\"\n  ) || hasTypeLike(sourcePath) || hasTypeLike(resultPath) || typeof endPath == \"string\" && denylist.has(endPath));\n}, denylist = /* @__PURE__ */ new Set([\n  \"color\",\n  \"colour\",\n  \"currency\",\n  \"email\",\n  \"format\",\n  \"gid\",\n  \"hex\",\n  \"href\",\n  \"hsl\",\n  \"hsla\",\n  \"icon\",\n  \"id\",\n  \"index\",\n  \"key\",\n  \"language\",\n  \"layout\",\n  \"link\",\n  \"linkAction\",\n  \"locale\",\n  \"lqip\",\n  \"page\",\n  \"path\",\n  \"ref\",\n  \"rgb\",\n  \"rgba\",\n  \"route\",\n  \"secret\",\n  \"slug\",\n  \"status\",\n  \"tag\",\n  \"template\",\n  \"theme\",\n  \"type\",\n  \"textTheme\",\n  \"unit\",\n  \"url\",\n  \"username\",\n  \"variant\",\n  \"website\"\n]);\nfunction isValidDate(dateString) {\n  return /^\\d{4}-\\d{2}-\\d{2}/.test(dateString) ? !!Date.parse(dateString) : !1;\n}\nfunction isValidURL(url) {\n  try {\n    new URL(url, url.startsWith(\"/\") ? \"https://acme.com\" : void 0);\n  } catch {\n    return !1;\n  }\n  return !0;\n}\nfunction hasTypeLike(path) {\n  return path.some((segment) => typeof segment == \"string\" && segment.match(/type/i) !== null);\n}\nconst TRUNCATE_LENGTH = 20;\nfunction stegaEncodeSourceMap(result, resultSourceMap, config) {\n  const { filter, logger, enabled } = config;\n  if (!enabled) {\n    const msg = \"config.enabled must be true, don't call this function otherwise\";\n    throw logger?.error?.(`[@sanity/client]: ${msg}`, { result, resultSourceMap, config }), new TypeError(msg);\n  }\n  if (!resultSourceMap)\n    return logger?.error?.(\"[@sanity/client]: Missing Content Source Map from response body\", {\n      result,\n      resultSourceMap,\n      config\n    }), result;\n  if (!config.studioUrl) {\n    const msg = \"config.studioUrl must be defined\";\n    throw logger?.error?.(`[@sanity/client]: ${msg}`, { result, resultSourceMap, config }), new TypeError(msg);\n  }\n  const report = {\n    encoded: [],\n    skipped: []\n  }, resultWithStega = encodeIntoResult(\n    result,\n    resultSourceMap,\n    ({ sourcePath, sourceDocument, resultPath, value }) => {\n      if ((typeof filter == \"function\" ? filter({ sourcePath, resultPath, filterDefault, sourceDocument, value }) : filterDefault({ sourcePath, resultPath, filterDefault, sourceDocument, value })) === !1)\n        return logger && report.skipped.push({\n          path: prettyPathForLogging(sourcePath),\n          value: `${value.slice(0, TRUNCATE_LENGTH)}${value.length > TRUNCATE_LENGTH ? \"...\" : \"\"}`,\n          length: value.length\n        }), value;\n      logger && report.encoded.push({\n        path: prettyPathForLogging(sourcePath),\n        value: `${value.slice(0, TRUNCATE_LENGTH)}${value.length > TRUNCATE_LENGTH ? \"...\" : \"\"}`,\n        length: value.length\n      });\n      const { baseUrl, workspace, tool } = resolveStudioBaseRoute(\n        typeof config.studioUrl == \"function\" ? config.studioUrl(sourceDocument) : config.studioUrl\n      );\n      if (!baseUrl)\n        return value;\n      const { _id: id, _type: type, _projectId: projectId, _dataset: dataset } = sourceDocument;\n      return C(\n        value,\n        {\n          origin: \"sanity.io\",\n          href: createEditUrl({\n            baseUrl,\n            workspace,\n            tool,\n            id,\n            type,\n            path: sourcePath,\n            ...!config.omitCrossDatasetReferenceData && { dataset, projectId }\n          })\n        },\n        // We use custom logic to determine if we should skip encoding\n        !1\n      );\n    }\n  );\n  if (logger) {\n    const isSkipping = report.skipped.length, isEncoding = report.encoded.length;\n    if ((isSkipping || isEncoding) && ((logger?.groupCollapsed || logger.log)?.(\"[@sanity/client]: Encoding source map into result\"), logger.log?.(\n      `[@sanity/client]: Paths encoded: ${report.encoded.length}, skipped: ${report.skipped.length}`\n    )), report.encoded.length > 0 && (logger?.log?.(\"[@sanity/client]: Table of encoded paths\"), (logger?.table || logger.log)?.(report.encoded)), report.skipped.length > 0) {\n      const skipped = /* @__PURE__ */ new Set();\n      for (const { path } of report.skipped)\n        skipped.add(path.replace(reKeySegment, \"0\").replace(/\\[\\d+\\]/g, \"[]\"));\n      logger?.log?.(\"[@sanity/client]: List of skipped paths\", [...skipped.values()]);\n    }\n    (isSkipping || isEncoding) && logger?.groupEnd?.();\n  }\n  return resultWithStega;\n}\nfunction prettyPathForLogging(path) {\n  return toString(jsonPathToStudioPath(path));\n}\nvar stegaEncodeSourceMap$1 = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  stegaEncodeSourceMap\n});\nexport {\n  encodeIntoResult,\n  stegaEncodeSourceMap,\n  stegaEncodeSourceMap$1\n};\n//# sourceMappingURL=stegaEncodeSourceMap.js.map\n"],"names":["reKeySegment","isKeySegment","segment","toString","path","target","segmentType","from","to","ESCAPE","UNESCAPE","jsonPath","match","parseJsonPath","parsed","parseRe","key","m","_key","jsonPathToStudioPath","jsonPathToMappingPath","resolveMapping","resultPath","csm","resultMappingPath","mappings","key1","key2","matchedPath","mapping","pathSuffix","isArray","value","isRecord","walkMap","mappingFn","v","idx","result","k","encodeIntoResult","encoder","resolveMappingResult","sourceDocument","sourcePath","matchPathSegments","fullSourceSegments","DRAFTS_PREFIX","getPublishedId","id","createEditUrl","options","baseUrl","_workspace","_tool","_id","type","projectId","dataset","workspace","tool","stringifiedPath","searchParams","segments","routerParams","resolveStudioBaseRoute","studioUrl","filterDefault","isValidDate","isValidURL","endPath","hasTypeLike","denylist","dateString","url","TRUNCATE_LENGTH","stegaEncodeSourceMap","resultSourceMap","config","filter","logger","enabled","msg","_a","_b","_c","report","resultWithStega","prettyPathForLogging","C","isSkipping","isEncoding","_d","_e","_f","_g","skipped","_h","_i","stegaEncodeSourceMap$1"],"mappings":"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","x_google_ignoreList":[0]}